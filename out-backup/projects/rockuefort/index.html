<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <title>rockuefort</title>
  <meta name="description" content="">
  <meta name="generator" content="websleydale ">
  <meta name="generator" content="pandoc">

  <link rel="stylesheet" href="/css/reset.css">
  <link rel="stylesheet" href="/css/fonts.css">
  <link rel="stylesheet" href="/css/lumeh.css">
  <link rel="stylesheet" href="/css/print.css">
  <link rel="stylesheet" href="/css/code.css">
  <link rel="icon" href="/image/l.png" sizes="108x108">
  <link rel="icon" href="/image/favicon.ico">
</head>
<body>
  <header>
    <h1><span style="font-family: 'DejaVu Sans Mono'">l</span>umeh.org</h1>
  </header>
  <nav>
    <p id="welcome">&nbsp;</p>
    <ul id="navigation-menu">
      <li><a href="/">index</a></li><!--
      --><li><a href="/music.html">music</a></li><!--
      --><li><a href="/projects/">projects</a></li><!--
      --><li><a href="/recipes/">recipes</a></li><!--
      --><li><a href="/tools/">tools</a></li><!--
      --><li><a href="//wiki.lumeh.org/">wiki</a></li><!--
      --><li><a href="/cafe/">café</a></li>
    </ul>
  </nav>
  <section id="content">

<h1 id="rockuefort">Rockuefort</h1>
<p><strong>Rockuefort</strong> “compiles” your playlists. It indexes your music directory and then searches through the metadata to locate the files corresponding to the entries in your playlist. This keeps your playlist decoupled from the actual paths and filenames of your music library. Rockuefort can build your playlist and copy or link the songs into a destination directory. It uses <code>rsync</code> to copy so that only new or changed files need to be copied.</p>
<h2 id="quick-set-up">Quick set-up</h2>
<ol type="1">
<li><p>Install <code>rsync</code> if you want to use the <code>copy</code> mode.</p></li>
<li><p>Obtain the latest Rockuefort source.</p>
<pre><code>$ git clone https://github.com/kalgynirae/rockuefort.git
$ cd rockuefort</code></pre></li>
<li><p>Set up a virtual environment and install the required dependencies.</p>
<pre><code>$ python3 -m venv env
$ env/bin/pip install -e .</code></pre></li>
<li><p>Put the installed Rockuefort script on your path.</p>
<pre><code># Assuming ~/bin is in your $PATH
$ ln -s --relative env/bin/rockuefort ~/bin/rockuefort</code></pre></li>
</ol>
<h2 id="usage">Usage</h2>
<p>Scan the <code>/var/music</code> directory:</p>
<pre><code>$ rockuefort index --add /var/music
$ rockuefort scan</code></pre>
<p>List the files that match the entries in the file <code>chiptunes</code>:</p>
<pre><code>$ rockuefort list chiptunes</code></pre>
<p>Link those files into the <code>muzic/blerg/</code> directory:</p>
<pre><code>$ rockuefort link chiptunes muzic/blerg/</code></pre>
<p>Copy those files into the <code>muzic/wheeeeeeee/</code> directory:</p>
<pre><code>$ rockuefort copy chiptunes muzic/wheeeeeeee/</code></pre>
<p>Play the playlist with VLC:</p>
<pre><code>$ rockuefort list chiptunes | xargs -d &#39;\n&#39; vlc</code></pre>
<p>Queue songs using <code>mpc</code> (<code>mpc</code> only likes relative paths):</p>
<pre><code>$ rockuefort list --strip &#39;/var/music/&#39; chiptunes | mpc add</code></pre>
<h2 id="playlist-format">Playlist format</h2>
<p>Rockuefort playlists are text files with one query per line. Blank lines and lines starting with <code>#</code> are ignored.</p>
<p>A query takes the following format:</p>
<pre><code>[O][N:]TAG=VALUE[|TAG=VALUE...]</code></pre>
<ul>
<li><code>O</code>: zero or more special option characters (defaults to nothing)</li>
<li><code>N</code>: the number of files this query is expected to match (defaults to <code>1</code>)</li>
<li><code>TAG</code>: one of <code>title</code>, <code>artist</code>, <code>album</code>, <code>genre</code>, or <code>crop</code> (see <em>Cropping</em> below)</li>
<li><code>VALUE</code>: a substring of the value to match. It can contain any character except <code>|</code>. Matching files will have this as a substring of the real tag value. It can be surrounded with double quotes to perform an exact match (instead of substring).</li>
</ul>
<h3 id="special-options-for-queries">Special options for queries</h3>
<ul>
<li><code>@</code>: <strong>fixed position:</strong> this query will not move when reordering tracks (e.g., with the <code>--shuffle</code> option)</li>
<li><code>|</code>: <strong>grouped:</strong> consecutive queries with this option will be treated as a single unit when reordering tracks</li>
<li><code>-</code>: <strong>lower volume:</strong> lower the volume of this track (can be specified multiple times; affects <code>render</code> command only)</li>
<li><code>+</code>: <strong>raise volume:</strong> raise the volume of this track (can be specified multiple times; affects <code>render</code> command only)</li>
</ul>
<h3 id="cropping">Cropping</h3>
<p>The format of a crop tag is</p>
<pre><code>crop=TIME[,TIME...]</code></pre>
<p>where <code>TIME</code> is a string like 2:13.5 (two minutes, 13.5 seconds) or 90 (90 seconds).</p>
<h3 id="example-playlists">Example playlists</h3>
<ul>
<li><a href="https://bitbucket.org/kalgynirae/playlists/src/f25098b617df69227113b4a76050c84e95d348d9/bedtime?at=master">kalgynirae/playlists/bedtime</a></li>
<li><a href="https://bitbucket.org/kalgynirae/playlists/src/f25098b617df69227113b4a76050c84e95d348d9/chiptune?at=master">kalgynirae/playlists/chiptune</a></li>
</ul>
<h2 id="whats-with-the-name">What’s with the name?</h2>
<p>Rockuefort is named after <a href="https://en.wikipedia.org/wiki/Roquefort">Roquefort cheese</a>.</p>

  </section>
  <footer id="copyright">
    <p>
      <span id="source"><a href="https://github.com/kalgynirae/rockuefort/blob/da502f49387d034c5033144d8e50153c1fc2c2fd/README.md">kalgynirae/rockuefort</a> on GitHub</span>
      | Copyright 2007–2020 Colin Chan
      | Contact: <img class=inline src="/image/admin-email.png" alt="[admin email]">
    </p>
  </footer>
</body>
</html>
